(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,a,t){e.exports=t(155)},123:function(e,a,t){},154:function(e,a,t){},155:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),c=t.n(l),o=(t(123),t(19)),i=t(14),s=t(22),m=t(20),u=t(12),d=t(3),p=t(189),E=t(27),g=t(210),f=t(197),v=t(198),h=t(196),b=t(191),y=t(54),x=t(200),O=t(199),w=t(100),S=t.n(w),D=t(101),j=t.n(D),L=t(102),k=t.n(L),N=t(193),C=t(194),T=t(195),R=t(39),I=t.n(R),A=t(11),_=t(9),Y=t.n(_),W=t(21),F=t(18),H=t.n(F),M=function(e){e?H.a.defaults.headers.common["x-auth-token"]=e:delete H.a.defaults.headers.common["x-auth-token"]},q=t(211),G=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=Object(q.a)();console.log("messagee is ",e),n({type:"SET_ALERT",payload:{msg:e,alertType:a,id:r}}),setTimeout(function(){return n({type:"REMOVE_ALERT",payload:r})},t)}},U=function(){return function(){var e=Object(W.a)(Y.a.mark(function e(a){var t;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&M(localStorage.token),e.prev=1,e.next=4,H.a.get("/api");case 4:t=e.sent,console.log("User is loaded successfully"),console.log(t.data),a({type:"USER_LOADED",payload:t.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a({type:"AUTH_ERROR"});case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(a){return e.apply(this,arguments)}}()},V=Object(p.a)(function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:240},title:{flexGrow:1},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-start"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}}),P=Object(A.b)(function(e){return{auth:e.auth}},{logout:function(e){return function(a){a({type:"LOGOUT"}),e.push("/")}}})(Object(i.g)(function(e){var a=V(),t=Object(E.a)(),n=r.a.useState(!1),l=Object(m.a)(n,2),c=l[0],i=l[1],u=function(){i(!1)},p=function(a){a.preventDefault(),u(),e.history.push("/adminLogin")},w=function(a){a.preventDefault(),u(),e.history.push("/employeeLogin")},D=function(a){a.preventDefault(),u(),e.history.push("/applyLeave")},L=function(a){a.preventDefault(),u(),e.history.push("/seeHistory")},R=function(a){a.preventDefault(),u(),e.history.push("/registerEmployee")},A=function(a){a.preventDefault(),u(),e.history.push("/showHistory")},_=function(a){a.preventDefault(),u(),e.logout(e.history)};return r.a.createElement("div",{className:a.root},r.a.createElement(h.a,null),r.a.createElement(f.a,{position:"fixed",className:Object(d.a)(a.appBar,Object(s.a)({},a.appBarShift,c))},r.a.createElement(v.a,null,r.a.createElement(y.a,{variant:"h6",noWrap:!0,className:a.title},r.a.createElement(o.b,{to:"/",style:{color:"#fff"}},null==e.auth.user?"Welcome":"Hii! ".concat(e.auth.user.name.toUpperCase()))),r.a.createElement(O.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:function(){i(!0)},className:Object(d.a)(c&&a.hide)},r.a.createElement(S.a,null)))),r.a.createElement("main",{className:Object(d.a)(a.content,Object(s.a)({},a.contentShift,c))},r.a.createElement("div",{className:a.drawerHeader}),r.a.createElement(y.a,{paragraph:!0},"Welcome to leave management system")),r.a.createElement(g.a,{className:a.drawer,variant:"persistent",anchor:"right",open:c,classes:{paper:a.drawerPaper}},r.a.createElement("div",{className:a.drawerHeader},r.a.createElement(O.a,{onClick:u},"rtl"===t.direction?r.a.createElement(j.a,null):r.a.createElement(k.a,null))),r.a.createElement(x.a,null),function(){if(!e.auth.loading)return e.auth.isAuthenticated&&1==e.auth.user.role?r.a.createElement(b.a,null,r.a.createElement(N.a,{button:!0,key:"Register Employee",onClick:R},r.a.createElement(C.a,null,r.a.createElement(I.a,null)),r.a.createElement(T.a,{primary:"Register Employee"})),r.a.createElement(N.a,{button:!0,key:"Show History",onClick:A},r.a.createElement(C.a,null,r.a.createElement(I.a,null)),r.a.createElement(T.a,{primary:"Show History"})),r.a.createElement(N.a,{button:!0,key:"Logout",onClick:_},r.a.createElement(C.a,null,r.a.createElement(I.a,null)),r.a.createElement(T.a,{primary:"Logout"}))):e.auth.isAuthenticated&&0==e.auth.user.role?r.a.createElement(b.a,null,r.a.createElement(N.a,{button:!0,key:"Apply for Leave",onClick:D},r.a.createElement(C.a,null,r.a.createElement(I.a,null)),r.a.createElement(T.a,{primary:"Apply for Leave"})),r.a.createElement(N.a,{button:!0,key:"See history",onClick:L},r.a.createElement(C.a,null,r.a.createElement(I.a,null)),r.a.createElement(T.a,{primary:"See history"})),r.a.createElement(N.a,{button:!0,key:"Logout",onClick:_},r.a.createElement(C.a,null,r.a.createElement(I.a,null)),r.a.createElement(T.a,{primary:"Logout"}))):r.a.createElement(b.a,null,r.a.createElement(N.a,{button:!0,key:"Admin Login",onClick:p},r.a.createElement(C.a,null,r.a.createElement(I.a,null)),r.a.createElement(T.a,{primary:"Admin Login"})),r.a.createElement(N.a,{button:!0,key:"Employee Login",onClick:w},r.a.createElement(C.a,null,r.a.createElement(I.a,null)),r.a.createElement(T.a,{primary:"Employee Login"})))}()))})),J=Object(A.b)(function(e){return{auth:e.auth}})(function(e){var a=e.auth;return r.a.createElement("div",null,a.isAuthenticated&&1==a.user.role?r.a.createElement(i.a,{to:"/adminDashboard"}):r.a.createElement(i.a,{to:"/employeeDashboard"}),r.a.createElement("div",{className:"container"},"Landing page"))}),B=t(212),Q=t(204),z=t(206),K=t(203),X=t(209),Z=t(201),$=t(205),ee=t(207),ae=t(42),te=t.n(ae),ne=t(202);function re(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Z.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var le=Object(p.a)(function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),ce=Object(A.b)(function(e){return{auth:e.auth}},{adminLogin:function(e,a){return function(){var t=Object(W.a)(Y.a.mark(function t(n){var r,l,c,o;return Y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{"Content-Type":"application/json"}},l=JSON.stringify({email:e,password:a}),t.prev=2,t.next=5,H.a.post("/api/adminLogin",l,r);case 5:c=t.sent,n({type:"LOGIN_SUCCESS",payload:c.data}),n(U()),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),(o=t.t0.response.data.errors)&&o.forEach(function(e){n(G(e.msg,"danger"))}),n({type:"LOGIN_FAIL"});case 15:case"end":return t.stop()}},t,null,[[2,10]])}));return function(e){return t.apply(this,arguments)}}()}})(function(e){var a=Object(n.useState)({email:"",password:""}),t=Object(m.a)(a,2),l=t[0],c=t[1],o=le(),d=l.email,p=l.password,E=function(e){c(Object(u.a)({},l,Object(s.a)({},e.target.name,e.target.value)))};return e.auth.isAuthenticated?r.a.createElement(i.a,{to:"/adminDashboard"}):r.a.createElement(ne.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:o.paper},r.a.createElement(B.a,{className:o.avatar},r.a.createElement(te.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),console.log("submitting"),e.adminLogin(d,p)},className:o.form,noValidate:!0},r.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",onChange:E,name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",onChange:E,id:"password",autoComplete:"current-password"}),r.a.createElement(K.a,{control:r.a.createElement(X.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(Q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit},"Sign In"),r.a.createElement($.a,{container:!0},r.a.createElement($.a,{item:!0,xs:!0},r.a.createElement(Z.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement($.a,{item:!0})))),r.a.createElement(ee.a,{mt:8},r.a.createElement(re,null)))});function oe(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Z.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var ie=Object(p.a)(function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),se=Object(A.b)(function(e){return{auth:e.auth}},{employeeLogin:function(e,a){return function(){var t=Object(W.a)(Y.a.mark(function t(n){var r,l,c,o;return Y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{"Content-Type":"application/json"}},l=JSON.stringify({email:e,password:a}),t.prev=2,t.next=5,H.a.post("/api/employeeLogin",l,r);case 5:c=t.sent,n({type:"LOGIN_SUCCESS",payload:c.data}),n(U()),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),(o=t.t0.response.data.errors)&&o.forEach(function(e){n(G(e.msg,"danger"))}),n({type:"LOGIN_FAIL"});case 15:case"end":return t.stop()}},t,null,[[2,10]])}));return function(e){return t.apply(this,arguments)}}()}})(function(e){var a=Object(n.useState)({email:"",password:""}),t=Object(m.a)(a,2),l=t[0],c=t[1],o=ie(),d=l.email,p=l.password,E=function(e){c(Object(u.a)({},l,Object(s.a)({},e.target.name,e.target.value)))};return e.auth.isAuthenticated&&!e.auth.loading?r.a.createElement(i.a,{to:"/employeeDashboard"}):r.a.createElement(ne.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:o.paper},r.a.createElement(B.a,{className:o.avatar},r.a.createElement(te.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),console.log("submitting"),e.employeeLogin(d,p)},className:o.form,noValidate:!0},r.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",onChange:E,name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",onChange:E,id:"password",autoComplete:"current-password"}),r.a.createElement(K.a,{control:r.a.createElement(X.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(Q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit},"Sign In"),r.a.createElement($.a,{container:!0},r.a.createElement($.a,{item:!0,xs:!0},r.a.createElement(Z.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement($.a,{item:!0})))),r.a.createElement(ee.a,{mt:8},r.a.createElement(oe,null)))});function me(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Z.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var ue=Object(p.a)(function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}),de=function(){var e=ue();return r.a.createElement(ne.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(B.a,{className:e.avatar},r.a.createElement(te.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement($.a,{container:!0,spacing:2},r.a.createElement($.a,{item:!0,xs:12,sm:6},r.a.createElement(z.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})),r.a.createElement($.a,{item:!0,xs:12,sm:6},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"})),r.a.createElement($.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement($.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"})),r.a.createElement($.a,{item:!0,xs:12},r.a.createElement(K.a,{control:r.a.createElement(X.a,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive inspiration, marketing promotions and updates via email."}))),r.a.createElement(Q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign Up"),r.a.createElement($.a,{container:!0,justify:"flex-end"},r.a.createElement($.a,{item:!0},r.a.createElement(Z.a,{href:"#",variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(ee.a,{mt:5},r.a.createElement(me,null)))},pe=Object(A.b)(function(e){return{alerts:e.alert}})(function(e){var a=e.alerts;return a.length>0&&null!==a&&a.map(function(e){return r.a.createElement("div",{className:"alert alert-".concat(e.alertType),key:e.id},e.msg)})}),Ee={clear:!1,leavedetail:null,loading:!0,leave:[],leaveHistory:[],error:"",emp:[]},ge=(t(149),t(30)),fe=t.n(ge),ve=(t(151),function(e){var a=e.leave,t=e.side;return r.a.createElement("div",null,"employee"==t?r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("table",{class:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Leave type"),r.a.createElement("th",{scope:"col"},"From"),r.a.createElement("th",{scope:"col"},"To"),r.a.createElement("th",{scope:"col"},"Days"),r.a.createElement("th",{scope:"col"},"Status"))),r.a.createElement("tbody",null,a.map(function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.leaveType),r.a.createElement("td",null,fe()(e.from).format("DD/MM/YYYY")),r.a.createElement("td",null,fe()(e.to).format("DD/MM/YYYY")),r.a.createElement("td",null,e.days),function(e){return"Pending"==e.status?r.a.createElement("td",{style:{color:"orange"}},e.status):"Approved"==e.status?r.a.createElement("td",{style:{color:"green"}},e.status,r.a.createElement("button",{className:"btn btn-sm btn-primary ml-4",type:"button","data-toggle":"collapse","data-target":"#collapseExample","aria-expanded":"false","aria-controls":"collapseExample"},"Remarks"),r.a.createElement("p",{className:"collapse",id:"collapseExample"},"Admin remarks: ",e.adminRemarks)):r.a.createElement("td",{style:{color:"red"}},e.status,r.a.createElement("button",{className:"btn btn-sm btn-primary ml-4",type:"button","data-toggle":"collapse","data-target":"#collapseExample","aria-expanded":"false","aria-controls":"collapseExample"},"Remarks"),r.a.createElement("p",{className:"collapse",id:"collapseExample"},"Admin remarks: ",e.adminRemarks))}(e))}))))):r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("table",{class:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Employee Name"),r.a.createElement("th",{scope:"col"},"From"),r.a.createElement("th",{scope:"col"},"To"),r.a.createElement("th",{scope:"col"},"Days"),r.a.createElement("th",{scope:"col"},"Status"))),r.a.createElement("tbody",null,a.map(function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.userId.name),r.a.createElement("td",null,fe()(e.from).format("DD/MM/YYYY")),r.a.createElement("td",null,fe()(e.to).format("DD/MM/YYYY")),r.a.createElement("td",null,e.days),function(e){return"Pending"==e.status?r.a.createElement("td",{style:{color:"orange"}},e.status):"Approved"==e.status?r.a.createElement("td",{style:{color:"green"}},e.status):r.a.createElement("td",{style:{color:"red"}},e.status)}(e),r.a.createElement(o.b,{to:"/leaveId/".concat(e._id)},r.a.createElement("td",null,"View Details")))}))))))}),he=Object(A.b)(function(e){return{leaveDetail:e.adminSide,auth:e.auth}},{getLeaveRequest:function(e){return function(){var a=Object(W.a)(Y.a.mark(function a(t){var n,r;return Y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,H.a.get("/api/getLeaveRequest?skip=".concat(e));case 3:n=a.sent,t({type:"GET_LEAVE_REQUEST",payload:n.data}),a.next=12;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0),(r=a.t0.response.data.errors)&&r.forEach(function(e){t(G(e.msg,"danger"))});case 12:case"end":return a.stop()}},a,null,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()}})(function(e){var a=Object(n.useState)(0),t=Object(m.a)(a,2),l=t[0];t[1];return Object(n.useEffect)(function(){e.getLeaveRequest(l)},[e.getLeaveRequest]),r.a.createElement(n.Fragment,null,e.leaveDetail.loading?r.a.createElement("div",{class:"spinner-border mt-5 ml-5",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading...")):r.a.createElement(ve,{leave:e.leaveDetail.leave,side:"admin"}))}),be={leave:[],error:"",loading:!0},ye=Object(A.b)(function(e){return{leaveDetail:e.employeeSide,auth:e.auth}},{getLeave:function(e){return function(){var a=Object(W.a)(Y.a.mark(function a(t){var n,r;return Y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,H.a.get("/api/getLeave?skip=".concat(e));case 3:n=a.sent,t({type:"GET_LEAVE",payload:n.data}),a.next=12;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0),(r=a.t0.response.data.errors)&&r.forEach(function(e){t(G(e.msg,"danger"))});case 12:case"end":return a.stop()}},a,null,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()}})(function(e){var a=Object(n.useState)(0),t=Object(m.a)(a,2),l=t[0];t[1];return Object(n.useEffect)(function(){!function(){var a=Object(W.a)(Y.a.mark(function a(){return Y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getLeave(l);case 2:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()()},[]),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,"Employee Dashboard"),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"card mt-2 mb-4 bg-warning",style:{width:"18rem"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Casual Leaves"),r.a.createElement("p",{className:"card-text"},"Leaves Remaining: ",r.a.createElement("strong",null,e.auth.user.casualLeaves)),r.a.createElement("p",{className:"card-text"},"Leaves Taken: ",r.a.createElement("strong",null,40-e.auth.user.casualLeaves)))),r.a.createElement("div",{className:"card ml-4 mt-2 mb-4 bg-info",style:{width:"18rem"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Sick Leaves"),r.a.createElement("p",{className:"card-text"},"Leaves Remaining: ",r.a.createElement("strong",null,e.auth.user.sickLeaves)),r.a.createElement("p",{className:"card-text"},"Leaves Taken: ",r.a.createElement("strong",null,15-e.auth.user.sickLeaves)))),r.a.createElement("div",{className:"card ml-4 mt-2 mb-4 bg-primary",style:{width:"18rem"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Restricted Holidays"),r.a.createElement("p",{className:"card-text"},"Leaves Remaining: ",r.a.createElement("strong",null,e.auth.user.restrictedHolidays)),r.a.createElement("p",{className:"card-text"},"Leaves Taken: ",r.a.createElement("strong",null,2-e.auth.user.restrictedHolidays))))),e.leaveDetail.loading?r.a.createElement("div",{class:"spinner-border mt-5 ml-5",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading...")):r.a.createElement(ve,{leave:e.leaveDetail.leave,side:"employee"})))}),xe=t(106),Oe=Object(A.b)(function(e){return{auth:e.auth}})(function(e){var a=e.component,t=e.auth,n=t.isAuthenticated,l=(t.loading,Object(xe.a)(e,["component","auth"]));return r.a.createElement(i.b,Object.assign({},l,{render:function(e){return n?r.a.createElement(a,e):r.a.createElement(i.a,{to:"/employeeLogin"})}}))}),we=Object(A.b)(null,{submitLeaveStatus:function(e,a,t,n,r){return function(){var l=Object(W.a)(Y.a.mark(function l(c){var o,i,s,m;return Y.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,console.log("adsd stt",e,a),o={headers:{"Content-Type":"application/json"}},i=JSON.stringify({adminremarks:e,status:a}),l.next=6,H.a.post("/api/submitLeaveStatus/".concat(n,"/").concat(r),i,o);case 6:s=l.sent,console.log("response from the server",s.data),c(G(s.data.success[0].msg,"success")),t.push("/adminDashboard"),l.next=17;break;case 12:l.prev=12,l.t0=l.catch(0),console.log(l.t0),(m=l.t0.response.data.errors)&&m.forEach(function(e){c(G(e.msg,"danger"))});case 17:case"end":return l.stop()}},l,null,[[0,12]])}));return function(e){return l.apply(this,arguments)}}()}})(Object(i.g)(function(e){var a=Object(n.useState)({adminremarks:"",status:""}),t=Object(m.a)(a,2),l=t[0],c=t[1],o=l.adminremarks,i=l.status,d=function(e){console.log(e.target.name),c(Object(u.a)({},l,Object(s.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement("h4",{class:"ml-5"},"Leave detail"),r.a.createElement("div",{className:"container"},r.a.createElement("table",{class:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Department"),r.a.createElement("th",{scope:"col"},"EmployeeID"),r.a.createElement("th",{scope:"col"},"Mobile"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.leaveDetail.userId.name),r.a.createElement("td",null,e.leaveDetail.userId.department),r.a.createElement("td",null,e.leaveDetail.userId.employeeID),r.a.createElement("td",null,e.leaveDetail.userId.mobile))),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Leave Type"),r.a.createElement("th",{scope:"col"},"From"),r.a.createElement("th",{scope:"col"},"To"),r.a.createElement("th",{scope:"col"},"Days"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.leaveDetail.leaveType),r.a.createElement("td",null,fe()(e.leaveDetail.from).format("DD/MM/YYYY")),r.a.createElement("td",null,fe()(e.leaveDetail.to).format("DD/MM/YYYY")),r.a.createElement("td",null,e.leaveDetail.days))),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Leave Remaining")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Casual Leaves "),r.a.createElement("th",{scope:"col"},"Sick Leave "),r.a.createElement("th",{scope:"col"},"Restricted Holidays"),r.a.createElement("th",{scope:"col"},"Email"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.leaveDetail.userId.casualLeaves),r.a.createElement("td",null,e.leaveDetail.userId.medicalLeaves),r.a.createElement("td",null,e.leaveDetail.userId.restrictedHolidays),r.a.createElement("td",null,e.leaveDetail.userId.email))),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Employee Remarks"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,e.leaveDetail.remarks))),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),console.log("formadaaaaa",l),e.submitLeaveStatus(o,i,e.history,e.leaveDetail._id,e.leaveDetail.userId._id)},className:"form-control"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{class:"md-form"},r.a.createElement("label",{for:"form7"},"Admin Remarks:"),r.a.createElement("textarea",{id:"form7",class:"md-textarea form-control",onChange:d,name:"adminremarks",rows:"3"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"status",onChange:d,class:"browser-default custom-select"},r.a.createElement("option",null,"Select"),r.a.createElement("option",{value:"Approved"},"Approved"),r.a.createElement("option",{value:"Cancel"},"Cancel"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{class:"btn btn-primary btn-block",type:"submit"},"Submit")))))})),Se=Object(A.b)(function(e){return{leaveDetail:e.adminSide}},{getLeaveDetail:function(e){return function(){var a=Object(W.a)(Y.a.mark(function a(t){var n,r;return Y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("leave idddd",e),a.next=4,H.a.get("/api/getLeaveDetail/".concat(e));case 4:n=a.sent,console.log("response from the server",n.data),t({type:"GET_LEAVE_DETAIL",payload:n.data}),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),(r=a.t0.response.data.errors)&&r.forEach(function(e){t(G(e.msg,"danger"))});case 14:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e){return a.apply(this,arguments)}}()}})(Object(i.g)(function(e){var a=e.match.params.leave_id;return Object(n.useEffect)(function(){e.getLeaveDetail(a)},[e.getLeaveDetail,e.match.params.leave_id]),r.a.createElement("div",null,"Hiii",null==e.leaveDetail.leavedetail?r.a.createElement("div",{class:"spinner-border mt-5 ml-5",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading...")):r.a.createElement(we,{leaveDetail:e.leaveDetail.leavedetail}))})),De=Object(A.b)(null,{leaveRequest:function(e,a,t,n,r,l){return function(){var c=Object(W.a)(Y.a.mark(function c(o){var i,s,m,u;return Y.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i={headers:{"Content-Type":"application/json"}},s=JSON.stringify({from:e,to:a,leaveType:t,remarks:n,days:r}),c.prev=2,c.next=5,H.a.post("/api/leaveRequest",s,i);case 5:m=c.sent,o(G(m.data.success[0].msg,"success")),l.push("/employeeDashboard"),c.next=15;break;case 10:c.prev=10,c.t0=c.catch(2),console.log(c.t0),(u=c.t0.response.data.errors)&&u.forEach(function(e){o(G(e.msg,"danger"))});case 15:case"end":return c.stop()}},c,null,[[2,10]])}));return function(e){return c.apply(this,arguments)}}()}})(Object(i.g)(function(e){var a,t,l,c=Object(n.useState)({to:"",from:"",startDay:"",endDay:"",remarks:"",leaveType:""}),o=Object(m.a)(c,2),i=o[0],d=o[1];function p(e){var a=e.match(/(\d+)/g);return new Date(a[0],a[1]-1,a[2])}return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h3",{style:{"margin-left":"40%"}},"Apply for leave"),r.a.createElement("div",{className:"container w-50"},r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t=i.to,n=i.endDay,r=i.from,l=i.startDay,c=i.remarks,o=i.leaveType,s=t-r;console.log("startDtatat",typeof l);var m=Math.ceil(s/864e5);console.log(m);var u=Math.floor(m/7);m-=2*u,l-n>1&&(m-=2),6==n&&0!=l&&m--,6!=n&&0==l&&m--,["2020-07-02","2020-07-05"].forEach(function(e){e>=void 0&&e<=void 0&&(console.log("cpppp"),p(e).getDay()%6!=0&&(console.log("xghgxh"),m--))}),console.log("final form data",o),e.leaveRequest(r,t,o,c,m,e.history)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleInputEmail1"},"From"),r.a.createElement("input",{className:"form-control",type:"date",name:"from",onChange:function(e){var n=e.target.value;console.log(e.target.value),(a=p(n)).setHours(0,0,0,1),console.log("startdate",a),t=a.getDay(),console.log(t),d(Object(u.a)({},i,{from:a,startDay:t}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleInputEmail1"},"To"),r.a.createElement("input",{className:"form-control",type:"date",name:"to",onChange:function(e){var a=e.target.value;console.log(e.target.value);var t=p(a);t.setHours(23,59,59),console.log("end date",t),l=t.getDay(),console.log("endDay",l),d(Object(u.a)({},i,{to:t,endDay:l}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleInputEmail1"},"Leave type"),r.a.createElement("select",{name:"leaveType",onChange:function(e){console.log(e.target.name,e.target.value),d(Object(u.a)({},i,Object(s.a)({},e.target.name,e.target.value)))},class:"browser-default custom-select"},r.a.createElement("option",{selected:!0},"Open this select menu"),r.a.createElement("option",{value:"Casual leave"},"Casual leave"),r.a.createElement("option",{value:"Sick leave"},"Sick leave"),r.a.createElement("option",{value:"Restricted holidays"},"Restricted holiday"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{class:"md-form"},r.a.createElement("label",{for:"form7"},"Employee Remarks:"),r.a.createElement("textarea",{id:"form7",class:"md-textarea form-control",name:"remarks",onChange:function(e){console.log("fdddd",i),d(Object(u.a)({},i,Object(s.a)({},e.target.name,e.target.value)))},rows:"3"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{class:"btn btn-primary btn-block",type:"submit"},"Submit")))))}));function je(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Z.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var Le=Object(p.a)(function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}),ke=Object(A.b)(function(e){return{adminSide:e.adminSide}},{registerEmployee:function(e,a,t,n,r,l,c){return function(){var c=Object(W.a)(Y.a.mark(function c(o){var i,s,m,u;return Y.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i={headers:{"Content-Type":"application/json"}},s=JSON.stringify({name:e,email:a,mobile:t,password:n,department:r,employeeID:l}),c.prev=2,c.next=5,H.a.post("/api/registerEmployee",s,i);case 5:m=c.sent,console.log(m.data.success),o({type:"EMP_REG_SUCCESS",payload:!0}),o(G(m.data.success[0].msg,"success")),c.next=16;break;case 11:c.prev=11,c.t0=c.catch(2),console.log(c.t0),(u=c.t0.response.data.errors)&&u.forEach(function(e){o(G(e.msg,"danger"))});case 16:case"end":return c.stop()}},c,null,[[2,11]])}));return function(e){return c.apply(this,arguments)}}()}})(Object(i.g)(function(e){var a=Object(n.useState)({name:"",email:"",mobile:"",password:"",employeeID:"",department:""}),t=Object(m.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(!0),i=Object(m.a)(o,2),d=i[0],p=i[1];console.log("counttt");var E=l.name,g=l.email,f=l.mobile,v=l.password,b=l.employeeID,x=l.department,O=Le();!e.adminSide.loading&&e.adminSide.clear&&(console.log("it comes uptu this"),d&&(c({name:"",email:"",mobile:"",password:"",employeeID:"",department:""}),p(!1)));var w=function(e){c(Object(u.a)({},l,Object(s.a)({},e.target.name,e.target.value)))};return r.a.createElement(ne.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:O.paper},r.a.createElement(B.a,{className:O.avatar},r.a.createElement(te.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.registerEmployee(E,g,f,v,b,x,e.history),console.log("counttt"),console.log("clearrrr",e.adminSide.clear)},className:O.form,noValidate:!0},r.a.createElement($.a,{container:!0,spacing:2},r.a.createElement($.a,{item:!0,xs:12,sm:6},r.a.createElement(z.a,{autoComplete:"fname",name:"name",variant:"outlined",required:!0,fullWidth:!0,value:E,id:"Name",label:"Name",onChange:w,autoFocus:!0})),r.a.createElement($.a,{item:!0,xs:12,sm:6},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,id:"Mobile",value:f,label:"Mobile",name:"mobile",onChange:w,autoComplete:"mobile"})),r.a.createElement($.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",value:g,label:"Email Address",name:"email",onChange:w,autoComplete:"email"})),r.a.createElement($.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",value:v,label:"Password",type:"password",id:"password",onChange:w,autoComplete:"current-password"})),r.a.createElement($.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,name:"employeeID",value:b,label:"employeeID",type:"employeeID",onChange:w,id:"employeeID",autoComplete:"employeeID"})),r.a.createElement($.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,name:"department",value:x,onChange:w,label:"department",type:"department",id:"department",autoComplete:"department"}))),r.a.createElement(Q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:O.submit},"Sign Up"),r.a.createElement($.a,{container:!0,justify:"flex-end"}))),r.a.createElement(ee.a,{mt:5},r.a.createElement(je,null)))})),Ne=Object(A.b)(function(e){return{lh:e.adminSide.leaveHistory,em:e.adminSide.emp}},{fetchLeaveDetail:function(){return function(){var e=Object(W.a)(Y.a.mark(function e(a){var t,n;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.get("/api/fetchLeaveHistory");case 3:t=e.sent,a({type:"FETCH_LEAVE_DETAIL",payload:t.data}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),(n=e.t0.response.data.errors)&&n.forEach(function(e){a(G(e.msg,"danger"))});case 12:case"end":return e.stop()}},e,null,[[0,7]])}));return function(a){return e.apply(this,arguments)}}()},fetchEmp:function(e){return function(){var a=Object(W.a)(Y.a.mark(function a(t){var n,r;return Y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,H.a.get("/api/fetchEmp?name=".concat(e));case 3:n=a.sent,console.log(n.data),t({type:"FETCH_EMP_SUCCESS",payload:n.data}),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0),(r=a.t0.response.data.errors)&&r.forEach(function(e){t(G(e.msg,"danger"))});case 13:case"end":return a.stop()}},a,null,[[0,8]])}));return function(e){return a.apply(this,arguments)}}()}})(Object(i.g)(function(e){var a=e.fetchLeaveDetail,t=e.lh,l=e.fetchEmp,c=e.em,i=Object(n.useRef)("");Object(n.useEffect)(function(){a()},[]);var s=null;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement("div",{className:"searchbar"},r.a.createElement("input",{autoComplete:"off",onChange:function(e){i.current=e.target.value,s&&(clearTimeout(s),console.log("timerid iss",s)),s=setTimeout(function(){console.log("coming here"),console.log("name",i.current),l(i.current)},1e3)},className:"search_input",type:"text",name:"name",placeholder:"Search..."}),r.a.createElement("a",{href:"#",className:"search_icon"},r.a.createElement("i",{className:"fas fa-search"}))))),c.length>0?r.a.createElement("div",{className:"container",style:{"margin-left":"20%",padding:"10px",width:"80vh","border-radius":"10%"}},function(e){return e.map(function(e,a){return a%2==0?r.a.createElement(o.b,{to:"/emp/".concat(e._id)},r.a.createElement("div",{style:{"background-color":"grey",color:"white",padding:"5px"}},e.name)):r.a.createElement(o.b,{to:"/emp/".concat(e._id)}," ",r.a.createElement("div",{style:{"background-color":"white",color:"black",padding:"5px"}},e.name))})}(c)):"",r.a.createElement("div",{style:{"margin-top":"20px"}},r.a.createElement(ve,{leave:t,side:"admin"})))}));var Ce=function(){return r.a.createElement("div",{className:"container"})},Te=t(40),Re=t(103),Ie=t(104),Ae={token:localStorage.getItem("token"),user:null,isAuthenticated:!1,loading:!0},_e=t(105),Ye=[],We=Object(Te.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"USER_LOADED":return Object(u.a)({},e,{user:n,isAuthenticated:!0,loading:!1});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",n.token),Object(u.a)({},e,n,{isAuthenticated:!0,loading:!0});case"REGISTER_FAIL":case"LOGIN_FAIL":case"LOGOUT":case"AUTH_ERROR":return localStorage.removeItem("token"),Object(u.a)({},e,{isAuthenticated:!1,loading:!1,token:null,user:null});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"SET_ALERT":return[].concat(Object(_e.a)(e),[n]);case"REMOVE_ALERT":return e.filter(function(e){return e.id!=n});default:return e}},adminSide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"EMP_REG_SUCCESS":return Object(u.a)({},e,{clear:n,loading:!1});case"GET_LEAVE_REQUEST":return Object(u.a)({},e,{leave:n,loading:!1});case"GET_LEAVE_DETAIL":return Object(u.a)({},e,{leavedetail:n,loading:!1});case"FETCH_LEAVE_DETAIL":return Object(u.a)({},e,{leaveHistory:n,loading:!1});case"FETCH_EMP_SUCCESS":return Object(u.a)({},e,{loading:!1,emp:n});default:return e}},employeeSide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"GET_LEAVE":return Object(u.a)({},e,{leave:n,loading:!1});case"GET_LEAVE_ERROR":return Object(u.a)({},e,{error:n,loading:!1});default:return e}}}),Fe=[Ie.a],He=Object(Te.createStore)(We,{},Object(Re.composeWithDevTools)(Te.applyMiddleware.apply(void 0,Fe)));t(154);localStorage.token&&M(localStorage.token);var Me=function(){return Object(n.useEffect)(function(){He.dispatch(U())},[]),r.a.createElement(A.a,{store:He},r.a.createElement(o.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(P,null),r.a.createElement(i.b,{exact:!0,path:"/",component:J}),r.a.createElement(pe,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/register",exact:!0,component:de}),r.a.createElement(i.b,{path:"/adminLogin",exact:!0,component:ce}),r.a.createElement(i.b,{path:"/adminDashboard",exact:!0,component:he}),r.a.createElement(i.b,{path:"/leaveId/:leave_id",exact:!0,component:Se}),r.a.createElement(i.b,{path:"/showHistory",exact:!0,component:Ne}),r.a.createElement(i.b,{path:"/emp/:id",exact:!0,component:Ce}),r.a.createElement(Oe,{path:"/employeeDashboard",exact:!0,component:ye}),r.a.createElement(i.b,{path:"/employeeLogin",exact:!0,component:se}),r.a.createElement(Oe,{path:"/registerEmployee",exact:!0,component:ke}),r.a.createElement(Oe,{path:"/applyLeave",exact:!0,component:De})))))};c.a.render(r.a.createElement(Me,null),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.cad97fe8.chunk.js.map